# 微前端框架横行的年代，为啥我就想用 iframe

> 这个冬天有点冷，身边裁员的消息一波接一波，这年头有个稳定的工作都是幸福的 ^-^ 同为天涯打工仔，为了混个温饱啥的，咱还得保持自己的新鲜度是不.....说实在的的，咱也怕被裁啊铁子们 \
> 今天这里分享一个 iframe 使用场景，用得着的帮忙点个赞啥的，这里先谢过啦~~

## 为啥我没选其他微前端框架呢？

1. 贴近当前业务场景：这里主要是所属的业务场景需要嵌入很多其他部门的耦合较低的业务；
2. 基于原生浏览器的硬隔离：js、css、html 天然隔离无干扰；其实这里对我来说考虑的主要还是业务隔离比较彻底；
3. 组外推广方便：对外方便接入，内部提供通用方法，丢出去，省心省事；

> 这里聊下自己关于服务业务的看法，其实就是想着法子的服务好业务 \
> 这里的服务好，不仅仅是满足于基本的业务需求（我相信这个都比较简单）；最主要的是需要适当把握下产品业务走向的趋势，在完成一个需求的情况下，提供对其业务扩展的可能性，最大化提升自己的影响力；其实就是尽量塑造自己的不可替代性，不然总感觉很危机（俗气点就是对公司没啥作用，瞬间就有了被裁的焦虑...）； \

## 先聊下思路

> 需求呢，其实就是在内部一个中台项目提供一块区域，接入组外不同的业务入口？\

- 发散下，这里其实考虑 2 块，对内和对外

  1. 其次对内扩展：对内露出公共业务数据，提供给外部使用
  2. 再有对外延展：对外提供暴露钩子

  - 钩子一定要“友好”，这里的“友好”必须具备良好的可读性、数据完善性、语法可提示性；

  ```typescript
  // 比方说
  // 通过会员id获取会员详细信息

  // 俗气点的写法
  function getVipDetail(id) {
    let info;
    // do something...
    return info;
  }

  // “友好”的写法
  /** 会员信息描述 */
  export type IVipDTO = {
    /** 会员 id */
    vipId: number | string;
    /** 会员姓名 */
    vipName: string;
    // ...
  };

  // 1. 基本注释
  /**
   * 根据会员id获取会员信息
   *
   * @param vipId 会员 id
   * @return Promise<IVipDTO>
   */
  // 2. 基本的入参、出参定义
  export const getVipDetail = (vipId: number | string | undefined): Promise<IVipDTO | null> => {
    // 3. 基本的判空异常
    if (!vipId) throw new Error('会员ID不能为空');

    return new Promise((resolve, reject) => {
      // do something...

      // 4. 成功抛出
      resolve(success);

      // or

      // 5. 失败抛出异常
      reject(fail);
    });
  };
  ```

  - 其实主要最大限度的减少对外沟通的成本（这里吐槽下，业务组太多，扯皮也很多...一不小心就成了甩锅对象，哎，人多的的地方就有江湖），所以，“友好”真的很重要；

## 撸起袖子，干起来

### 设计整体架构

> 明确改怎么干，要干些什么，这一步需要分层、分点把细节拆分出来

1. 

